search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a") %>%
html_text()
news_date <- search_results %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
headlines <- c(headlines, headline)
news_date <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
headlines
length(headlines)
length(news_dates)
headlines <- c()
news_dates <- c()
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
search_results
search_results %>%
html_text()
search_results %>%
html_text()[1]
search_texts <- search_results %>%
html_text()
search_texts[1]
search_texts <- search_results %>%
html_nodes("a") %>%
html_text()
search_texts[1]
search_texts
search_texts <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
search_texts
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
news_date <- search_results %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
# browser 오픈
remDr$open()
remDr$navigate(url)
google_url <- "https://www.google.com/"
remDr$navigate(google_url)
searchElem <- remDr$findElement(using="xpath", '//*[@id="tsf"]/div[2]/div[1]/div[1]/div/div[2]/input')
searchElem$sendKeysToElement(list("SK이노베이션", key="enter"))
newsbutton <- remDr$findElement(using="xpath", '//*[@id="hdtb-msb-vis"]/div[2]/a')
newsbutton$clickElement()
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
news_date <- search_results %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
news_dates
headlines
length(headlines)
length(news_dates)
headlines <- c()
news_dates <- c()
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
search_results[1]
search_results[2]
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")[1]
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
news_date <- search_results %>%
html_nodes("span.f.nsa.fwzPFf")
news_date <- news_date[1] %>%
html_text()
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
news_dates
search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf")
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")
search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf")
search_results[5] %>%
html_nodes("span.f.nsa.fwzPFf")
search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")
search_text <- search_results[2] %>%
html_nodes("span.f.nsa.fwzPFf")
search_text[1]
search_text[1] %>%
html_text()
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
ndate <- search_results %>%
html_nodes("span.f.nsa.fwzPFf")
news_date <- ndate[1] %>%
html_text()
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
search_text <- search_results %>%
html_nodes("span.f.nsa.fwzPFf")
search_text
search_text[2]
search_results
for (i in 1:length(search_results)) {
search_text <- search_results[i] %>%
html_nodes("span.f.nsa.fwzPFf")
print(search_text)
}
for (i in 1:length(search_results)) {
search_text <- search_results[i] %>%
html_nodes("span.f.nsa.fwzPFf")
ndate <- search_text[1] %>%
html_text()
print(ndate)
}
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[i] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
}
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
if (i != 23) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
news_dates
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
}
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
}
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
}
headlines <- c(headlines, headline)
news_dates <- c(news_dates, news_date)
}
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
news_dates <- c(news_dates, news_date)
}
headlines <- c(headlines, headline)
}
google_url <- "https://www.google.com/"
# browser 오픈
remDr$open()
google_url <- "https://www.google.com/"
remDr$navigate(google_url)
searchElem <- remDr$findElement(using="xpath", '//*[@id="tsf"]/div[2]/div[1]/div[1]/div/div[2]/input')
searchElem$sendKeysToElement(list("SK이노베이션", key="enter"))
newsbutton <- remDr$findElement(using="xpath", '//*[@id="hdtb-msb-vis"]/div[2]/a')
newsbutton$clickElement()
headlines <- c()
news_dates <- c()
for (num in 1:23) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
news_dates <- c(news_dates, news_date)
}
headlines <- c(headlines, headline)
}
for (num in 1:24) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[i] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
news_dates <- c(news_dates, news_date)
}
headlines <- c(headlines, headline)
if (num != 24) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
headlines <- c()
news_dates <- c()
for (num in 1:24) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
news_date <- search_results[1] %>%
html_nodes("span.f.nsa.fwzPFf") %>%
html_text()
news_dates <- c(news_dates, news_date)
}
headlines <- c(headlines, headline)
if (num != 24) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
headlines
news_dates
headlines <- c()
news_dates <- c()
for (num in 1:24) {
if (num %% 10 == 0) {
Sys.sleep(2)
}
html <- remDr$getPageSource()[[1]]
search_results <- html %>%
read_html() %>%
html_nodes("div.g")
headline <- search_results %>%
html_nodes("a.l.lLrAF") %>%
html_text()
for (i in 1:length(search_results)) {
ndate <- search_results[i] %>%
html_nodes("span.f.nsa.fwzPFf")
news_date <- ndate[1] %>%
html_text()
news_dates <- c(news_dates, news_date)
}
headlines <- c(headlines, headline)
if (num != 24) {
nbutton <- remDr$findElement(using="xpath", '//*[@id="pnnext"]')
nbutton$clickElement()
}
}
length(headlines)
length(news_dates)
headlines
news_dates
google_news <- data.frame(news_dates, headlines)
parse_google_date <- function(s) {
s <- str_replace_all(s, ".$", "")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
s <- str_replace_all(s, ".$", "")
s <- str_replace_all(s, "\\. ", "")
return (s)
}
apply(google_news, 2, parse_google_date)
Sys.date
Sys.Date
Sys.Date()
parse_google_date <- function(s) {
if (str_view(".시간")) {
s <- Sys.Date()
return (s)
}
s <- str_replace_all(s, ".$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
if (str_ends(s, "전")) {
s <- Sys.Date()
return (s)
}
s <- str_replace_all(s, ".$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
?str_detect
parse_google_date <- function(s) {
if (str_detect(s, ".+ 전$")) {
s <- Sys.Date()
return (s)
}
s <- str_replace_all(s, ".$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
if (str_detect(s, ".+ 전$")) {
s <- str_replace_all(s, ".+ 전", Sys.Date())
return (s)
}
s <- str_replace_all(s, "\\.$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
if (str_detect(s, ".+ 전$")) {
s <- str_replace_all(s, ".+ 전", as.character(Sys.Date()))
return (s)
}
s <- str_replace_all(s, "\\.$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
if (str_detect(s, ".+ 전$")) {
s <- str_replace_all(s, ".+ 전", as.character(Sys.Date()))
}
s <- str_replace_all(s, "\\.$", "")
s <- str_replace_all(s, "\\. ", "-")
return (s)
}
apply(google_news, 2, parse_google_date)
parse_google_date <- function(s) {
if (str_detect(s, ".+ 전$")) {
s <- str_replace_all(s, ".+ 전", as.character(Sys.Date()))
}
s <- str_replace_all(s, "\\.$", "")
s <- str_replace_all(s, "\\. ", "-")
if (str_detect(s, "20[0-9][0-9]-[0-9][0-9]-[0-9]$")) {
s <- str_replace_all(s, "-", "-0")
if (length(s) > 10) {
s <- str_replace(s, "-0", "-")
}
}
return (s)
}
apply(google_news, 2, parse_google_date)
head(google_news)
dim(google_news)
setwd("C:/Users/kwon/Desktop/R/2020-ERICA-Construction-Programming-R/Team Project")
write.csv(google_news, file="google_news.csv", row.names=F)
